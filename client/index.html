<!DOCTYPE html>
<html lang="bg">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pravdast - Business Engineering Platform</title>
    <meta name="description" content="Професионална бизнес инженерна платформа за предсказуем растеж и системни решения в България." />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      
      body {
        font-family: system-ui, -apple-system, sans-serif;
        background-color: #0f172a;
        color: white;
      }
      
      #root {
        min-height: 100vh;
      }
    </style>
  </head>
  <body>
    <div id="root">
      <div id="app">
        <div style="min-height: 100vh; background-color: #0f172a; display: flex; align-items: center; justify-content: center; font-family: system-ui, sans-serif;">
          <div style="text-align: center;">
            <h1 style="font-size: 3rem; font-weight: bold; margin-bottom: 1rem; color: white;">Pravdast</h1>
            <p style="font-size: 1.25rem; color: #94a3b8; margin-bottom: 2rem;">Business Engineering Platform - CRM System</p>
            <a href="/admin" style="background-color: #eab308; color: black; padding: 0.75rem 1.5rem; text-decoration: none; border-radius: 0.25rem; font-weight: 600;">Админ панел</a>
          </div>
        </div>
      </div>
    </div>
    <script>
      // Simple routing and admin system
      const currentPath = window.location.pathname;
      
      if (currentPath === '/admin') {
        document.getElementById('app').innerHTML = `
          <div id="admin-container" style="min-height: 100vh; background-color: #0f172a; color: white;">
            <div id="login-form" style="min-height: 100vh; display: flex; align-items: center; justify-content: center; font-family: system-ui, sans-serif;">
              <div style="background-color: #1e293b; padding: 2rem; border-radius: 0.5rem; width: 100%; max-width: 400px;">
                <h1 style="color: white; text-align: center; margin-bottom: 1.5rem; font-size: 1.5rem; font-weight: bold;">Админ панел</h1>
                <form id="admin-login" style="display: flex; flex-direction: column; gap: 1rem;">
                  <input name="username" type="text" placeholder="Потребител" required style="padding: 0.75rem; background-color: #334155; color: white; border: none; border-radius: 0.25rem; font-size: 1rem;" />
                  <input name="password" type="password" placeholder="Парола" required style="padding: 0.75rem; background-color: #334155; color: white; border: none; border-radius: 0.25rem; font-size: 1rem;" />
                  <button type="submit" style="padding: 0.75rem; background-color: #eab308; color: black; border: none; border-radius: 0.25rem; font-size: 1rem; font-weight: 600; cursor: pointer;">Влез</button>
                </form>
              </div>
            </div>
            <div id="admin-dashboard" style="display: none;">
              <header style="background-color: #1e293b; padding: 1rem;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <h1 style="font-size: 1.25rem; font-weight: bold;">CRM Панел</h1>
                  <button id="logout-btn" style="background-color: #dc2626; color: white; padding: 0.5rem 1rem; border: none; border-radius: 0.25rem; cursor: pointer;">Излез</button>
                </div>
              </header>
              <div style="padding: 1.5rem;">
                <h2 style="font-size: 1.5rem; margin-bottom: 1rem;">Добре дошли в админ панела!</h2>
                <p style="color: #94a3b8;">CRM системата е готова за управление на блог постове и категории.</p>
                <div style="margin-top: 2rem; padding: 1rem; background-color: #1e293b; border-radius: 0.5rem;">
                  <h3 style="margin-bottom: 0.5rem;">Статус на системата:</h3>
                  <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 0.5rem;">✓ PostgreSQL база данни - свързана</li>
                    <li style="margin-bottom: 0.5rem;">✓ JWT автентикация - активна</li>
                    <li style="margin-bottom: 0.5rem;">✓ API endpoints - функционални</li>
                    <li style="margin-bottom: 0.5rem;">✓ Vercel деплойване - готово</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // Handle login
        document.getElementById('admin-login').addEventListener('submit', async (e) => {
          e.preventDefault();
          const formData = new FormData(e.target);
          
          try {
            const response = await fetch('/api/admin/login', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                username: formData.get('username'),
                password: formData.get('password')
              })
            });
            
            const data = await response.json();
            if (response.ok) {
              localStorage.setItem('adminToken', data.token);
              document.getElementById('login-form').style.display = 'none';
              document.getElementById('admin-dashboard').style.display = 'block';
            } else {
              alert(data.message || 'Невалидни данни');
            }
          } catch (error) {
            alert('Грешка при връзката със сървъра');
          }
        });
        
        // Handle logout
        document.addEventListener('click', (e) => {
          if (e.target.id === 'logout-btn') {
            localStorage.removeItem('adminToken');
            document.getElementById('login-form').style.display = 'flex';
            document.getElementById('admin-dashboard').style.display = 'none';
          }
        });
        
        // Check existing token
        if (localStorage.getItem('adminToken')) {
          document.getElementById('login-form').style.display = 'none';
          document.getElementById('admin-dashboard').style.display = 'block';
        }
      }
    </script>
  </body>
</html>